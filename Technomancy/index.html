<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Technomancy v.π²</title>
    <link id="icon" rel="icon" href="favicon.ico" type="image/x-icon" />

    <link rel="stylesheet" href="app.css" type="text/css" />
    <script src="jquery.js" ></script>
    <script src="events.js" ></script>
    <script src="spells.js" ></script>
    <script src="seeds.js"></script>
    <script src="adventure.js" defer></script>
    <script src="equipment_data.js" defer></script>
    <script src="location_data.js" defer></script>
    <script src="alchemy.js" defer></script>
    <script src="challenges.js"></script>
    <script src="tower.js"></script>

    <script src="//cdn.rawgit.com/erosson/swarm-numberformat/v0.1.0/dist/swarm-numberformat.min.js"></script>
    <script src="app.js" ></script>

    <style id="color_theme"></style>
</head>
<body class="bgc fgc">
    <div style="font-size: small; position:absolute; top: 0;">
        <a id="version" href="changelog.txt" target="_blank" class="fgc">?.?.?</a> |

        <span id="music"></span>
        <a href="#" onclick="$('#settings').toggleClass('hidden');" style="text-decoration: none;" class="fgc">Settings and Stuff</a>
        
        <span style="position: absolute; left: 42em; top: 0em; white-space: nowrap">Buy Amount: <input id="buy_amount" class="fgc bgc_second" style="border: none; width: 4em;" type="number" min="0"/></span>
        <span id="upgrade_count" class="tooltip" style="position: absolute; left: 55em; top: 0; white-space: nowrap;">
            <span id="num_upgrades"></span>
            <span id="purchased_upgrades" class="tooltiptext fgc bgc_second">Purchased Upgrades:</span>
        </span>
        <span id="save_text" class="fgc" style="position: absolute; left: 63em; top: 0;">Saved!</span>

    </div>
    <div id="resource_bar">
        <div id="time" class="hidden" style="padding-bottom: .3em; border-bottom-color: blue;">
            <span style="color: blue; text-shadow: coral 1px 0px 15px; vertical-align: middle;">Time: 0</span>
            <span id="time_toggle" class="res_gen" onclick="toggle_time()" style="margin: .1em; padding: .1em; padding-top: 0; border: 1px solid; border-radius: 3px;">
                Speed Time
            </span>
            <br />
        </div>
        <div id="refined_mana" class="hidden" style="padding-bottom: .3em; border-bottom-color: red;">
            <span style="color: red; text-shadow: deepskyblue 1px 1px 10px; vertical-align: middle;">Refined mana: 0</span>
            <span class="res_gen " onclick="if(resources['refined_mana'].amount < 250) {alert('You need 250 refined mana.');return;} else if (!$('#events').hasClass('hidden')) { alert('There\'s already an event going on!'); return; } if (confirm('Try to force an event to occur for 250 refined mana?')) { resources['refined_mana'].amount -= 250; handle_event(false); }" style="margin: .1em; padding: .1em; padding-top: 0; border: 1px solid; border-radius: 3px;">
                Force Event
            </span>
            <br />
        </div>
        <div id="purified_mana" class="hidden" style="padding-bottom: .3em; border-bottom-color: darkred;">
            <span style="color: darkred; text-shadow: skyblue 0px 0px 7px; vertical-align: middle;">Purified mana: 0</span>
            <span class="res_gen " onclick="choose_event()" style="margin: .1em; padding: .1em; padding-top: 0; border: 1px solid; border-radius: 3px;">
                Choose Event
            </span>
            <br />
        </div>
        <div id="fuel" class="hidden" style="padding-bottom: .3em; border-bottom-color: greenyellow;">
            <span style="color: greenyellow; text-shadow: yellow 1px 0px 10px; vertical-align: middle;">Refined mana: 0</span>
            <span class="res_gen " onclick="if (adventure_data['challenge']) challenge_menu(); else start_adventure();" style="margin: .1em; padding: .1em; padding-top: 0; border: 1px solid; border-radius: 3px;">
                Adventure
            </span>
            <br />
        </div>
        <div id="magic_bag" class="hidden" style="padding-bottom: .3em; border-bottom-color: white;">
            <span style="color: white; text-shadow: yellow 1px 0px 10px; vertical-align: middle;">Bag: 0</span>
            <span class="res_gen" onclick="perm_bag()" style="margin: .1em; padding: .1em; padding-top: 0; border: 1px solid; border-radius: 3px;">
                Look Inside
            </span>
            <br />
        </div>
        <div id="essence" class="hidden" style="padding-bottom: .3em; border-bottom-color: lightblue;">
            <span style="color: lightblue; text-shadow: blue 1px 0px 10px; vertical-align: middle;">Essence: 0</span>
            <span class="res_gen" onclick="tower()" style="margin: .1em; padding: .1em; padding-top: 0; border: 1px solid; border-radius: 3px;">
                Tower
            </span>
            <br />
        </div>
        <div id="mana" class="hidden" style="color: mediumpurple"><span></span><br /></div>
        <div id="energy" class="hidden" style="color: gold"><span></span><br /></div>
        <div id="research" class="hidden" style="color: deepskyblue;"><span></span><br /></div>
        <div id="manager" class="hidden" style="color: tan;"><span></span><br /></div>
        <div id="sludge" class="hidden" style="color: brown;"><span></span><br /></div>

        <div id="money" class="hidden"><span>Money: 0</span><span id="money_per_sec" class="res_gen">Making 1 per second.</span><br /></div>
        <div id="stone" class="hidden"><span>Stone: 0<br /></span><span id="stone_per_sec" class="res_gen">Making 0 per second.</span><br /></div>
        <div id="wood" class="hidden"><span>Wood: 0<br /></span><span id="wood_per_sec" class="res_gen">Making 0 per second.</span><br /></div>
        <div id="iron_ore" class="hidden"><span>Iron Ore: 0<br /></span><span id="iron_ore_per_sec" class="res_gen">Making 0 per second.</span><br /></div>
        <div id="coal" class="hidden"><span>Coal: 0<br /></span><span id="coal_per_sec" class="res_gen">Making 0 per second.</span><br /></div>
        <div id="iron" class="hidden"><span>Iron: 0<br /></span><span id="iron_per_sec" class="res_gen">Making 1 per second.</span><br /></div>
        <div id="gold" class="hidden"><span>Gold: 0<br /></span><span id="gold_per_sec" class="res_gen">Making 1 per second.</span><br /></div>
        <div id="diamond" class="hidden"><span>Diamond: 0<br /></span><span id="diamond_per_sec" class="res_gen">Making 1 per second.</span><br /></div>
        <div id="jewelry" class="hidden"><span>Jewelry: 0<br /></span><span id="jewelry_per_sec" class="res_gen">Making 1 per second.</span><br /></div>
        <div id="oil" class="hidden"><span>Oil: 0<br /></span><span id="oil_per_sec" class="res_gen">Making 1 per second.</span><br /></div>
        <div id="paper" class="hidden"><span>Paper: 0<br /></span><span id="paper_per_sec" class="res_gen">Making 1 per second.</span><br /></div>
        <div id="ink" class="hidden"><span>Ink: 0<br /></span><span id="ink_per_sec" class="res_gen">Making 1 per second.</span><br /></div>
        <div id="book" class="hidden"><span>Book: 0<br /></span><span id="book_per_sec" class="res_gen">Making 1 per second.</span><br /></div>
        <div id="sand" class="hidden"><span>Sand: 0<br /></span><span id="sand_per_sec" class="res_gen">Making 1 per second.</span><br /></div>
        <div id="glass" class="hidden"><span>Glass: 0<br /></span><span id="glass_per_sec" class="res_gen">Making 1 per second.</span><br /></div>
        <div id="water" class="hidden"><span>Water: 0<br /></span><span id="water_per_sec" class="res_gen">Making 1 per second.</span><br /></div>
        <div id="hydrogen" class="hidden"><span>Hydrogen: 0<br /></span><span id="hydrogen_per_sec" class="res_gen">Making 1 per second.</span><br /></div>
        <div id="steel_beam" class="hidden"><span>Steel beam: 0<br /></span><span id="steel_beam_per_sec" class="res_gen">Making 1 per second.</span><br /></div>
        <div id="uranium" class="hidden"><span>Uranium: 0<br /></span><span id="uranium_per_sec" class="res_gen">Making 1 per second.</span><br /></div>
        <div><a href="http://castle.chirpingmustard.com/castle.html" target="_blank" style="text-decoration: none;" class="fgc"><span id="sandcastle" class="hidden"><span>Sandcastle: 0<br /></span><span id="sandcastle_per_sec" class="res_gen"></span><br /></span></a></div>
        <div id="glass_bottle" class="hidden"><span>Glass bottle: 0<br /></span><span id="glass_bottle_per_sec" class="res_gen"></span><br /></div>
        <div id="mithril" class="hidden"><span>Mithril: 0<br /></span><span id="mithril_per_sec" class="res_gen"></span><br /></div>
        <div id="void" class="hidden"><span style="color: gray">Void: 0<br /></span><span id="void_per_sec" class="res_gen"></span><br /></div>

    </div>
    <div id="buildings">
        <div id="potion" class="hidden">
            <div class="building">
                Current Potion: <span id="current_potion">Nothing</span><span id="potion_time" class="building_amount">0</span><br/>
                Effect: <span id="potion_effect">None</span>
            </div>
            <hr />
        </div>
        <div class="hidden">
            <span class="building bgc_second" onclick="$('#pc_box').toggleClass('hidden');$('#rule_data').html('');">Production Control</span>
            <div id="pc_box" class="hidden" style="z-index: 2; position: absolute; left: -15.5em;">
                <div class="clickable fgc bgc_second" style="width: 45em; position: relative; display: flex; z-index: 1">
                    <div id="rule_names" style="width: 15em; border-right: solid 1px;"></div>
                    <div id="rule_data" style="width: 30em; text-align: center;">
                    </div>
                </div>
            </div>

            <span id="autobuild_unlock" class="building bgc_second hidden" onclick="$('#autobuild_box').toggleClass('hidden'); draw_autobuild();">AutoBuild</span>
            <div id="autobuild_box" class="hidden" style="z-index: 1; position: absolute; left: -3em;">
                <div id="autobuild_items" class="clickable fgc bgc_second" style="width: 25em; min-height: 20em; position: relative; z-index: 1"></div>
            </div>
            <hr />
        </div>
        <div id="spells" class="hidden">
            <div style="position: relative">
                <span id="building_s_manastone" class="building tooltip" style="color: mediumpurple;"><span class="building_name"><span class="building_prefix"></span>Mana Stone</span><span class="building_amount">0</span><span class="tooltiptext fgc bgc_second">Each stone generates 1 mana.</span></span>
            </div>
            <div style="position: relative">
                <span id="building_s_essence" class="building tooltip" style="color: lightblue;"><span class="building_name"><span class="building_prefix"></span>Essence</span><span class="building_amount">0</span><span class="tooltiptext fgc bgc_second">Pure essence of Magic. Provides a boost to most resources.</span></span>
            </div>
            <div style="position: relative">
                <span id="building_s_mana_refinery" class="building tooltip" style="color: #33f;" onclick="s_refinery(parseInt($('#buy_amount').val()))"><span class="building_name"><span class="building_prefix"></span>Mana Refinery</span><span class="building_amount">1</span><span class="tooltiptext fgc bgc_second">Refine your mana into a crystalline form.</span></span>
            </div>
            <div style="position: relative">
                <span id="building_s_goldboost" class="building tooltip" style="color: gold;"><span class="building_name"><span class="building_prefix"></span>Greed</span><span class="building_amount"></span><span class="tooltiptext fgc bgc_second">Uses 2 mana, but doubles net money and gold gains.</span></span>
                <span id="toggle_s_goldboost" class="building_state_off" onclick="toggle_building_state('s_goldboost')">Off</span>
            </div>
            <div style="position: relative" class="hidden">
                <span id="building_s_energyboost" class="building tooltip" style="color: plum;">
                    <span class="building_name"><span class="building_prefix"></span>Thaumaturgic Converter</span>
                    <span class="building_amount">1</span>
                    <span style="float: right; color: green;" onclick="purchase_building('s_energyboost');">&nbsp;+&nbsp;</span>
                    <span style="float: right; color: red;" onclick="destroy_building('s_energyboost');">&nbsp;-&nbsp;</span>
                    <span class="tooltiptext fgc bgc_second">Converts mana to energy. <br />Every energy takes 3 mana. </span>
                </span>
                <span id="toggle_s_energyboost" class="building_state_off" onclick="toggle_building_state('s_energyboost')">Off</span>
            </div>
            <div style="position: relative">
                <span id="building_s_trade" class="building tooltip" style="color: moccasin;"><span class="building_name"><span class="building_prefix"></span>Market Portal</span><span class="building_amount">6</span><span class="tooltiptext fgc bgc_second">Uses 6 mana to open a portal to the interdimensional market. What could be there?<br/>(Note: having more mana available makes trades better)</span></span>
                <span id="toggle_s_trade" class="building_state_off" onclick="toggle_building_state('s_trade')">Off</span>
            </div>
            <div style="position: relative">
                <span id="building_s_startboost" class="building tooltip" style="color: darkgreen;"><span class="building_name"><span class="building_prefix"></span>Boost</span><span class="building_amount">25</span><span class="tooltiptext fgc bgc_second">Uses 25 mana to generate resources.</span></span>
                <span id="toggle_s_startboost" class="building_state_off" onclick="toggle_building_state('s_startboost')">Off</span>
            </div>
            <div style="position: relative">
                <span id="building_s_time_magic" class="building tooltip" style="color: cyan;">
                    <span class="building_name"><span class="building_prefix"></span>Time Rewind</span>
                    <span class="building_amount">25</span>
                    <span class="tooltiptext fgc bgc_second">Uses mana to make time pass twice as fast.</span>
                </span>
                <span id="toggle_s_time_magic" class="building_state_off" onclick="toggle_building_state('s_time_magic')">Off</span>
            </div>
            <div style="position: relative">
                <span id="building_s_workshop" class="building" style="color: dimgrey;">
                    <span class="building_name"><span class="building_prefix"></span>Manufacturing</span>
                    <span class="tooltip">
                        (?)
                        <span class="tooltiptext fgc bgc_second">
                            Can build a variety of different items. <hr />
                            <span id="workshop_prod">???</span>
                        </span>
                    </span>
                    <select id="workshop_select" class="fgc bgc_second" onchange="s_workshop(this.value);">
                        <option value="iron">Extract iron</option>
                        <option value="wood">Grow wood</option>
                        <option value="glass">Smelt glass</option>
                        <option value="steel">Forge Steel</option>
                    </select>
                    <span class="building_amount">50</span>
                </span>
                <span id="toggle_s_workshop" class="building_state_off" onclick="toggle_building_state('s_workshop')">Off</span>
            </div>
            <div style="position: relative">
                <span id="building_s_time_maker" class="building tooltip" style="color: aquamarine;"><span class="building_name"><span class="building_prefix"></span>Flux Capacitor</span><span class="building_amount">100</span><span class="tooltiptext fgc bgc_second">Travels back in time, then gives you that time.</span></span>
                <span id="toggle_s_time_maker" class="building_state_off" onclick="toggle_building_state('s_time_maker')">Off</span>
            </div>
            <div style="position: relative" class="">
                <div id="building_s_workshop_2" class="building" style="color: lightslategrey; height: 2.5em;" onclick="$('#workshop_option_bar').toggleClass('hidden');">
                    <span class="building_name">
                        <span class="building_prefix"></span>
                        Workshop
                    </span>
                    <span class="tooltip">
                        (?)
                        <span class="tooltiptext fgc bgc_second">
                            You can build various things here. As you progress in the game, more items will become available, but you'll have to turn this spell on to see them.
                        </span>
                    </span>
                    <span class="building_amount">200</span>
                    <span id="workshop_progress_bar" class="clickable" style="position: absolute; left: 0; top: 1.7em; width: 17.5em; height: .5em; background-color: green;"></span>
                    <div id="workshop_option_bar" class="hidden fgc" onclick="event.stopPropagation()" style="position: absolute; top: 2.5em; left: 0; z-index: 1;">
                        <div class="clickable bgc_second" style="max-width: none; width: 20.5em;">
                            <table>
                                <tbody>
                                    <tr>
                                        <td class="clickable" onclick="s_workshop_set('glass')">(50) Glass</td>
                                        <td>100 Sand</td>
                                        <td>5s</td>
                                    </tr>
                                    <tr>
                                        <td class="clickable" onclick="s_workshop_set('steel_beam')">(25) Steel Beam</td>
                                        <td>500 Iron<br />500 Coal</td>
                                        <td>10s</td>
                                    </tr>
                                    <tr>
                                        <td class="clickable" onclick="s_workshop_set('ink')">(50) Ink</td>
                                        <td>50 Oil</td>
                                        <td>10s</td>
                                    </tr>
                                    <tr>
                                        <td class="clickable" onclick="s_workshop_set('money')">(1500) Money</td>
                                        <td>10 Gold</td>
                                        <td>15s</td>
                                    </tr>
                                </tbody>
                                <tbody id="workshop_adv" class="hidden">
                                    <tr><td colspan="3" align="center">Adventuring Supplies</td></tr>
                                    <tr>
                                        <td class="clickable" onclick="s_workshop_set('machine_part')">(1) Machine Part</td>
                                        <td>10 Iron</td>
                                        <td>2m30s</td>
                                    </tr>
                                    <tr>
                                        <td class="clickable" onclick="s_workshop_set('basic_weapon')">(1) Small Laser</td>
                                        <td>1,000 Iron</td>
                                        <td>5m</td>
                                    </tr>
                                    <tr>
                                        <td class="clickable" onclick="s_workshop_set('time_engine')">(1) Warp Drive</td>
                                        <td>15 Fuel<br />3 Machine Part <br />1 Magic Orb (time)</td>
                                        <td>10m</td>
                                    </tr>
                                    <tr id="workshop_cannon" class="hidden">
                                        <td class="clickable" onclick="s_workshop_set('cannon')">(1) Cannon</td>
                                        <td>150K Iron<br />100 Uranium<br />150 Energy</td>
                                        <td>10m</td>
                                    </tr>
                                    <tr id="workshop_const_shield" class="hidden">
                                        <td class="clickable" onclick="s_workshop_set('const_shield')">Mithril Plating</td>
                                        <td>5,000 Mithril<br />5,000 Steel beam<br />250K Iron</td>
                                        <td>20m</td>
                                    </tr>
                                    <tr id="workshop_shard" class="hidden">
                                        <td class="clickable" onclick="s_workshop_set('dimension_shard')">Dimension Shard</td>
                                        <td>Everything</td>
                                        <td>???</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <span id="toggle_s_workshop_2" class="building_state_off" onclick="toggle_building_state('s_workshop_2')">Off</span>
            </div>
            <div style="position: relative" class="">
                <div id="building_s_enchantment" class="building" style="color: turquoise; height: 2.5em;" onclick="$('#enchantment_option_bar').toggleClass('hidden');">
                    <span class="building_name"><span class="building_prefix"></span>Enchanting Table</span>
                    <span class="tooltip">
                        (?)
                        <span class="tooltiptext fgc bgc_second">
                            It's pretty much the workshop, but with different stuff. Also, the rewards scale depending on something you have, so you need to click the green finished option to claim it.
                        </span>
                    </span>
                    <span class="building_amount">500</span>
                    <span id="enchantment_progress_bar" class="clickable" style="position: absolute; left: 0; top: 1.7em; width: 17.5em; height: .5em; background-color: green;"></span>
                    <div id="enchantment_option_bar" class="hidden fgc" onclick="event.stopPropagation()" style="position: absolute; top: 2.5em; left: 0; z-index: 1;">
                        <div class="clickable bgc_second" style="max-width: none; width: 20.5em;">
                            <table>
                                <tbody>
                                    <tr id="enchant_money">
                                        <td class="clickable" onclick="s_enchant_set('money')">Pot of Greed</td>
                                        <td>Money, Gold</td>
                                        <td>1h</td>
                                        <td>(Mana)</td>
                                    </tr>
                                    <tr id="enchant_energy">
                                        <td class="clickable" onclick="s_enchant_set('energy')">Battery</td>
                                        <td>Energy</td>
                                        <td>3h</td>
                                        <td>(Research)</td>
                                    </tr>
                                    <tr id="enchant_research">
                                        <td class="clickable" onclick="s_enchant_set('research')">Omniscience</td>
                                        <td>Research</td>
                                        <td>24h</td>
                                        <td>(Mana)</td>
                                    </tr>
                                    <tr id="enchant_mana">
                                        <td class="clickable" onclick="s_enchant_set('mana')">Spellmastery</td>
                                        <td>+1 mana stone</td>
                                        <td>24h</td>
                                        <td>(+1 always)</td>
                                    </tr>
                                    <tr id="enchant_tokens">
                                        <td class="clickable" onclick="s_enchant_set('tokens')">Gambling</td>
                                        <td>Casino tokens!</td>
                                        <td>12h</td>
                                        <td>(Money)</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <span id="toggle_s_enchantment" class="building_state_off" onclick="toggle_building_state('s_enchantment')">Off</span>
            </div>

            <div style="position: relative;" class="">
                <span id="building_s_ai" class="building" style="color: fuchsia;">
                    <span class="building_name"><span class="building_prefix"></span>AI Unit</span>
                    <span class="tooltip">
                        (?)
                        <span class="tooltiptext fgc bgc_second">
                            It can manage stuff for you.
                        </span>
                    </span>
                    <span class="building_amount">100</span>
                </span>
                <span id="toggle_s_ai" class="building_state_off" onclick="toggle_building_state('s_ai')">Off</span>
            </div>
            <div style="position: relative;" class="">
                <span id="building_s_autoessence" class="building" style="color: lightblue;">
                    <span class="building_name tooltip">
                        <span class="building_prefix"></span>
                        Essence Compressor
                        <span class="tooltiptext fgc bgc_second">
                            It turns mana into essence. Yay!
                        </span>
                    </span>
                        
                    <span class="building_amount">100</span>
                </span>
                <span id="toggle_s_autoessence" class="building_state_off" onclick="toggle_building_state('s_autoessence')">Off</span>
            </div>

            <div style="position: relative; display: none;" class="">
                <span id="building_s_final" class="building tooltip" style="color: fuchsia; text-shadow: #0FF 1px 0px 10px;" onclick="s_final_upgrade()"><span class="building_name"><span class="building_prefix"></span>???</span><span class="building_amount">500</span><span class="tooltiptext fgc bgc_second">???</span></span>
                <span id="toggle_s_final" class="building_state_off" onclick="toggle_building_state('s_final')">Off</span>
            </div>

            <!-- Challenge building, should never be shown. Here so that the production values on resources can grab it's name. -->
            <div style="position: relative; display: none;" class="">
                <span id="building_s_challenge" class="building tooltip" style="color: fuchsia; text-shadow: #0FF 1px 0px 10px;"><span class="building_name"><span class="building_prefix"></span>Challenge</span><span class="building_amount">1</span><span class="tooltiptext fgc bgc_second">Hmm...</span></span>
            </div>
            <hr />
        </div>

        <!-- Base production -->
        <div style="position: relative">
            <span onclick="destroy_building('bank')" class="building_remove">X</span>
            <span id="building_bank" class="building tooltip" onclick="purchase_building('bank');">
                <span class="building_name"><span class="building_prefix"></span>Bank</span>
                <span class="building_amount">0</span>
                <span class="tooltiptext fgc bgc_second" onclick="event.stopPropagation()">Generates 1 money per second.<br /> Costs 10 money.</span>
            </span>
            <span id="toggle_bank" class="building_state_on" onclick="toggle_building_state('bank')">On</span>
        </div>
        <div style="position: relative" class="hidden">
            <span onclick="destroy_building('oil_well')" class="building_remove">X</span>
            <span id="building_oil_well" class="building tooltip" onclick="purchase_building('oil_well');">
                <span class="building_name"><span class="building_prefix"></span>Oil Well</span>
                <span class="building_amount">0</span>
                <span class="tooltiptext fgc bgc_second" onclick="event.stopPropagation()">Generates 1 oil per second.<br /> Costs 1000 money, 100 stone, 500 iron.</span>
            </span>
            <span id="toggle_oil_well" class="building_state_on" onclick="toggle_building_state('oil_well')">On</span>
        </div>
        <div style="position: relative" class="hidden">
            <span onclick="destroy_building('library')" class="building_remove">X</span>
            <span id="building_library" class="building tooltip" onclick="purchase_building('library');">
                <span class="building_name"><span class="building_prefix"></span>Library</span>
                <span class="building_amount">0</span>
                <span class="tooltiptext fgc bgc_second" onclick="event.stopPropagation()">Generates 1 research per second.<br /> Costs 500 money, 500 wood, 50 iron, 10 book.</span>
            </span>
            <span id="toggle_library" class="building_state_on" onclick="toggle_building_state('library')">On</span>
        </div>
        <div style="position: relative" class="hidden">
            <span onclick="destroy_building('water_purifier')" class="building_remove">X</span>
            <span id="building_water_purifier" class="building tooltip" onclick="purchase_building('water_purifier');">
                <span class="building_name"><span class="building_prefix"></span>Water Purifier</span>
                <span class="building_amount">0</span>
                <span class="tooltiptext fgc bgc_second" onclick="event.stopPropagation()">Generates 1 water per second.<br /> Costs 500 money, 500 stone, 500 sand, 100 glass.</span>
            </span>
            <span id="toggle_water_purifier" class="building_state_on" onclick="toggle_building_state('water_purifier')">On</span>
        </div>
        <div style="position: relative" class="hidden">
            <span onclick="destroy_building('skyscraper')" class="building_remove">X</span>
            <span id="building_skyscraper" class="building tooltip" onclick="purchase_building('skyscraper');">
                <span class="building_name"><span class="building_prefix"></span>Skyscraper</span>
                <span class="building_amount">0</span>
                <span class="tooltiptext fgc bgc_second" onclick="event.stopPropagation()">Generates 1 manager.<br /> Should be auto-filled here </span>
            </span>
            <span id="toggle_skyscraper" class="building_state_on" onclick="toggle_building_state('skyscraper')">On</span>
        </div>
        <br />

        <!-- Energy Generators -->
        <div style="position: relative" class="hidden">
            <span onclick="destroy_building('oil_engine')" class="building_remove">X</span>
            <span id="building_oil_engine" class="building tooltip" onclick="purchase_building('oil_engine');">
                <span class="building_name"><span class="building_prefix"></span>Oil-burning Engine</span>
                <span class="building_amount">0</span>
                <span class="tooltiptext fgc bgc_second" onclick="event.stopPropagation()">Generates -1 oil per second, 1 energy per second.<br /> Costs 500 money, 200 iron.</span>
            </span>
            <span id="toggle_oil_engine" class="building_state_on" onclick="toggle_building_state('oil_engine')">On</span>
        </div>
        <div style="position: relative" class="hidden">
            <span onclick="destroy_building('solar_panel')" class="building_remove">X</span>
            <span id="building_solar_panel" class="building tooltip" onclick="purchase_building('solar_panel');">
                <span class="building_name"><span class="building_prefix"></span>Solar Panel</span>
                <span class="building_amount">0</span>
                <span class="tooltiptext fgc bgc_second" onclick="event.stopPropagation()"></span>
            </span>
            <span id="toggle_solar_panel" class="building_state_on" onclick="toggle_building_state('solar_panel')">On</span>
        </div>
        <div style="position: relative" class="hidden">
            <span onclick="destroy_building('hydrogen_burner')" class="building_remove">X</span>
            <span id="building_hydrogen_burner" class="building tooltip" onclick="purchase_building('hydrogen_burner');">
                <span class="building_name"><span class="building_prefix"></span>Hydrogen Engine</span>
                <span class="building_amount">0</span>
                <span class="tooltiptext fgc bgc_second" onclick="event.stopPropagation()">Generates -20 hydrogen per second, 10 energy per second, 7 water per second.<br /> Costs 2500 money, 500 iron.</span>
            </span>
            <span id="toggle_hydrogen_burner" class="building_state_on" onclick="toggle_building_state('hydrogen_burner')">On</span>
        </div>
        <div style="position: relative" class="hidden">
            <span onclick="destroy_building('reactor')" class="building_remove">X</span>
            <span id="building_reactor" class="building tooltip" onclick="purchase_building('reactor');">
                <span class="building_name"><span class="building_prefix"></span>Nuclear Reactor</span>
                <span class="building_amount">0</span>
                <span class="tooltiptext fgc bgc_second" onclick="event.stopPropagation()"></span>
            </span>
            <span id="toggle_reactor" class="building_state_on" onclick="toggle_building_state('reactor')">On</span>
        </div>

        <br />

        <!-- Converters (uses a resource to run)-->
        <div style="position: relative" class="hidden">
            <span onclick="destroy_building('mine')" class="building_remove">X</span>
            <span id="building_mine" class="building tooltip" onclick="purchase_building('mine');">
                <span class="building_name"><span class="building_prefix"></span>Mine</span>
                <span class="building_amount">0</span>
                <span class="tooltiptext fgc bgc_second" onclick="event.stopPropagation()">Generates -1 money per second, 1 Stone per second.<br /> Costs 20 money.</span>
            </span>
            <span id="toggle_mine" class="building_state_on" onclick="toggle_building_state('mine')">On</span>
        </div>
        <div style="position: relative" class="hidden">
            <span onclick="destroy_building('logging')" class="building_remove">X</span>
            <span id="building_logging" class="building tooltip" onclick="purchase_building('logging');">
                <span class="building_name"><span class="building_prefix"></span>Logging Camp</span>
                <span class="building_amount">0</span>
                <span class="tooltiptext fgc bgc_second" onclick="event.stopPropagation()">Generates -1 money per second, 1 Wood per second.<br /> Costs 20 money.</span>
            </span>
            <span id="toggle_logging" class="building_state_on" onclick="toggle_building_state('logging')">On</span>
        </div>
        <div style="position: relative" class="hidden" >
            <span onclick="destroy_building('furnace')" class="building_remove">X</span>
            <span id="building_furnace" class="building tooltip" onclick="purchase_building('furnace');">
                <span class="building_name"><span class="building_prefix"></span>Blast Furnace</span>
                <span class="building_amount">0</span>
                <span class="tooltiptext fgc bgc_second" onclick="event.stopPropagation()">
                    Generates 1 iron per second, 1 Coal per second, -5 Wood per second, -3 Iron ore per second.<br />
                    Costs 15 money, 30 stone.
                </span>
            </span>
            <span id="toggle_furnace" class="building_state_on" onclick="toggle_building_state('furnace')">On</span>
        </div>
        <div style="position: relative" class="hidden">
            <span onclick="destroy_building('gold_finder')" class="building_remove">X</span>
            <span id="building_gold_finder" class="building tooltip" onclick="purchase_building('gold_finder');">
                <span class="building_name"><span class="building_prefix"></span>Gold Sifter</span>
                <span class="building_amount">0</span>
                <span class="tooltiptext fgc bgc_second" onclick="event.stopPropagation()">Generates 0.1 gold per second, -20 stone per second.<br />Costs 100 money, 500 stone, 200 wood.</span>
            </span>
            <span id="toggle_gold_finder" class="building_state_on" onclick="toggle_building_state('gold_finder')">On</span>
        </div>
        <div style="position: relative" class="hidden">
            <span onclick="destroy_building('compressor')" class="building_remove">X</span>
            <span id="building_compressor" class="building tooltip" onclick="purchase_building('compressor');">
                <span class="building_name"><span class="building_prefix"></span>Diamond Compressor</span>
                <span class="building_amount">0</span>
                <span class="tooltiptext fgc bgc_second" onclick="event.stopPropagation()">Generates 0.1 diamond per second, -10 coal per second. <br />Costs 100 money, 500 stone, 200 iron.</span>
            </span>
            <span id="toggle_compressor" class="building_state_on" onclick="toggle_building_state('compressor')">On</span>
        </div>
        <div style="position: relative" class="hidden">
            <span onclick="destroy_building('jeweler')" class="building_remove">X</span>
            <span id="building_jeweler" class="building tooltip" onclick="purchase_building('jeweler');">
                <span class="building_name"><span class="building_prefix"></span>Jeweler</span>
                <span class="building_amount">0</span>
                <span class="tooltiptext fgc bgc_second" onclick="event.stopPropagation()">Generates -3 gold per second, -1 diamond per second, 1 jewelry per second.<br /> Costs 200 money, 750 stone</span>
            </span>
            <span id="toggle_jeweler" class="building_state_on" onclick="toggle_building_state('jeweler')">On</span>
        </div>
        <div style="position: relative" class="hidden">
            <span onclick="destroy_building('glass_jeweler')" class="building_remove">X</span>
            <span id="building_glass_jeweler" class="building tooltip" onclick="purchase_building('glass_jeweler');">
                <span class="building_name"><span class="building_prefix"></span>Glassblower</span>
                <span class="building_amount">0</span>
                <span class="tooltiptext fgc bgc_second" onclick="event.stopPropagation()">  TOOLTIP  </span>
            </span>
            <span id="toggle_glass_jeweler" class="building_state_on" onclick="toggle_building_state('glass_jeweler')">On</span>
        </div>
        <div style="position: relative" class="hidden">
            <span onclick="destroy_building('jewelry_store')" class="building_remove">X</span>
            <span id="building_jewelry_store" class="building tooltip" onclick="purchase_building('jewelry_store');">
                <span class="building_name"><span class="building_prefix"></span>Jewelry Store</span>
                <span class="building_amount">0</span>
                <span class="tooltiptext fgc bgc_second" onclick="event.stopPropagation()">Generates -1 jewelry per second, 400 money per second.<br /> Costs 5000 money, 500 stone, 500 wood.</span>
            </span>
            <span id="toggle_jewelry_store" class="building_state_on" onclick="toggle_building_state('jewelry_store')">On</span>
        </div>
        <br />

        <!-- Machines (use energy) -->
        <div style="position: relative" class="hidden">
            <span onclick="destroy_building('paper_mill')" class="building_remove">X</span>
            <span id="building_paper_mill" class="building tooltip" onclick="purchase_building('paper_mill');">
                <span class="building_name"><span class="building_prefix"></span>Paper Mill</span>
                <span class="building_amount">0</span>
                <span class="tooltiptext fgc bgc_second" onclick="event.stopPropagation()">Generates -1 energy per second, -3 wood per second, 1 paper per second.<br /> Costs 200 money, 200 iron, 100 oil.</span>
            </span>
            <span id="toggle_paper_mill" class="building_state_on" onclick="toggle_building_state('paper_mill')">On</span>
        </div>
        <div style="position: relative" class="hidden">
            <span onclick="destroy_building('ink_refinery')" class="building_remove">X</span>
            <span id="building_ink_refinery" class="building tooltip" onclick="purchase_building('ink_refinery');">
                <span class="building_name"><span class="building_prefix"></span>Ink Refinery</span>
                <span class="building_amount">0</span>
                <span class="tooltiptext fgc bgc_second" onclick="event.stopPropagation()">Generates -1 energy per second, -3 oil per second, 1 ink per second.<br /> Costs 200 money, 200 iron, 100 oil.</span>
            </span>
            <span id="toggle_ink_refinery" class="building_state_on" onclick="toggle_building_state('ink_refinery')">On</span>
        </div>
        <div style="position: relative" class="hidden">
            <span onclick="destroy_building('money_printer')" class="building_remove">X</span>
            <span id="building_money_printer" class="building tooltip" onclick="purchase_building('money_printer');">
                <span class="building_name"><span class="building_prefix"></span>Money Printer</span>
                <span class="building_amount">0</span>
                <span class="tooltiptext fgc bgc_second" onclick="event.stopPropagation()">Generates -1 energy per second, -2 paper per second, -1 ink per second, 30 money per second.<br /> Costs 500 money, 500 iron, 200 oil.</span>
            </span>
            <span id="toggle_money_printer" class="building_state_on" onclick="toggle_building_state('money_printer')">On</span>
        </div>
        <div style="position: relative" class="hidden">
            <span onclick="destroy_building('book_printer')" class="building_remove">X</span>
            <span id="building_book_printer" class="building tooltip" onclick="purchase_building('book_printer');">
                <span class="building_name"><span class="building_prefix"></span>Printing Press</span>
                <span class="building_amount">0</span>
                <span class="tooltiptext fgc bgc_second" onclick="event.stopPropagation()">Generates -1 energy per second, -2 paper per second, -1 ink per second, 0.1 book per second.<br /> Costs 500 money, 500 iron, 200 oil.</span>
            </span>
            <span id="toggle_book_printer" class="building_state_on" onclick="toggle_building_state('book_printer')">On</span>
        </div>
        <div style="position: relative" class="hidden">
            <span onclick="destroy_building('hydrogen_gen')" class="building_remove">X</span>
            <span id="building_hydrogen_gen" class="building tooltip" onclick="purchase_building('hydrogen_gen');">
                <span class="building_name"><span class="building_prefix"></span>Electrolysis Machine</span>
                <span class="building_amount">0</span>
                <span class="tooltiptext fgc bgc_second" onclick="event.stopPropagation()">Generates -2 energy per second, -1 water per second, 2 hydrogen per second.<br /> Costs 2500 money, 500 glass.</span>
            </span>
            <span id="toggle_hydrogen_gen" class="building_state_on" onclick="toggle_building_state('hydrogen_gen')">On</span>
        </div>
        <div style="position: relative" class="hidden">
            <span onclick="destroy_building('fuel_maker')" class="building_remove">X</span>
            <span id="building_fuel_maker" class="building tooltip" onclick="purchase_building('fuel_maker');">
                <span class="building_name"><span class="building_prefix"></span>Fuel Synthesizer</span>
                <span class="building_amount">0</span>
                <span class="tooltiptext fgc bgc_second" onclick="event.stopPropagation()"></span>
            </span>
            <span id="toggle_fuel_maker" class="building_state_on" onclick="toggle_building_state('fuel_maker')">On</span>
        </div>
        <div style="position: relative" class="hidden">
            <span onclick="destroy_building('magnet')" class="building_remove">X</span>
            <span id="building_magnet" class="building tooltip" onclick="purchase_building('magnet');">
                <span class="building_name"><span class="building_prefix"></span>Giant Magnet</span>
                <span class="building_amount">0</span>
                <span class="tooltiptext fgc bgc_second" onclick="event.stopPropagation()"></span>
            </span>
            <span id="toggle_magnet" class="building_state_on" onclick="toggle_building_state('magnet')">On</span>
        </div>
        <div style="position: relative" class="hidden">
            <span onclick="destroy_building('book_boost')" class="building_remove">X</span>
            <span id="building_book_boost" class="building tooltip" onclick="purchase_building('book_boost');">
                <span class="building_name"><span class="building_prefix"></span>Book Recycler</span>
                <span class="building_amount">0</span>
                <span class="tooltiptext fgc bgc_second" onclick="event.stopPropagation()"></span>
            </span>
            <span id="toggle_book_boost" class="building_state_on" onclick="toggle_building_state('book_boost')">On</span>
        </div>
        <div style="position: relative" class="hidden">
            <span onclick="destroy_building('steel_smelter')" class="building_remove">X</span>
            <span id="building_steel_smelter" class="building tooltip" onclick="purchase_building('steel_smelter');">
                <span class="building_name"><span class="building_prefix"></span>Steel Foundry</span>
                <span class="building_amount">0</span>
                <span class="tooltiptext fgc bgc_second" onclick="event.stopPropagation()"></span>
            </span>
            <span id="toggle_steel_smelter" class="building_state_on" onclick="toggle_building_state('steel_smelter')">On</span>
        </div>
        <div style="position: relative" class="hidden">
            <span onclick="destroy_building('mithril_smelter')" class="building_remove">X</span>
            <span id="building_mithril_smelter" class="building tooltip" onclick="purchase_building('mithril_smelter');">
                <span class="building_name"><span class="building_prefix"></span>Mithril Forge</span>
                <span class="building_amount">0</span>
                <span class="tooltiptext fgc bgc_second" onclick="event.stopPropagation()"></span>
            </span>
            <span id="toggle_mithril_smelter" class="building_state_on" onclick="toggle_building_state('mithril_smelter')">On</span>
        </div>
        <div style="position: relative" class="hidden">
            <span onclick="destroy_building('drill')" class="building_remove">X</span>
            <span id="building_drill" class="building tooltip" onclick="purchase_building('drill');">
                <span class="building_name"><span class="building_prefix"></span>Giant Drill</span>
                <span class="building_amount">0</span>
                <span class="tooltiptext fgc bgc_second" onclick="event.stopPropagation()"></span>
            </span>
            <span id="toggle_drill" class="building_state_on" onclick="toggle_building_state('drill')">On</span>
        </div>
        <br />

        <!-- Managed Buildings -->
        <div style="position: relative" class="hidden">
            <span onclick="destroy_building('big_bank')" class="building_remove">X</span>
            <span id="building_big_bank" class="building tooltip" onclick="purchase_building('big_bank');">
                <span class="building_name"><span class="building_prefix"></span>Investment Company</span>
                <span class="building_amount">0</span>
                <span class="tooltiptext fgc bgc_second" onclick="event.stopPropagation()">Generates -1 manager, 50 money per second.<br />Costs 5000 money, 5000 stone, 100 glass.<hr><i style='font-size: small'>Serious business</i></span>
            </span>
            <span id="toggle_big_bank" class="building_state_on" onclick="toggle_building_state('big_bank')">On</span>
        </div>
        <div style="position: relative" class="hidden">
            <span onclick="destroy_building('big_mine')" class="building_remove">X</span>
            <span id="building_big_mine" class="building tooltip" onclick="purchase_building('big_mine');">
                <span class="building_name"><span class="building_prefix"></span>Strip Mine</span>
                <span class="building_amount">0</span>
                <span class="tooltiptext fgc bgc_second" onclick="event.stopPropagation()">Generates -1 manager, -150 money per second, 50 stone per second, 10 iron ore per second, 3 coal per second, 2 iron per second, 0.5 gold per second, 0.1 diamond per second, 20 sand per second.<br />Costs 10000 money, 100 steel beam, 10000 wood.</span>
            </span>
            <span id="toggle_big_mine" class="building_state_on" onclick="toggle_building_state('big_mine')">On</span>
        </div>

        <br />

        <!-- Adventure Buildings -->
        <div style="position: relative" class="hidden">
            <span id="building_hydrogen_mine" class="building tooltip">
                <span class="building_name"><span class="building_prefix"></span>Hydrogen Mine</span>
                <span class="building_amount">0</span>
                <span class="tooltiptext fgc bgc_second" onclick="event.stopPropagation()"></span>
            </span>
            <span id="toggle_hydrogen_mine" class="building_state_on" onclick="toggle_building_state('hydrogen_mine')">On</span>
        </div>
        <div style="position: relative" class="hidden">
            <span id="building_mana_purifier" class="building tooltip">
                <span class="building_name"><span class="building_prefix"></span>Mana Purifier</span>
                <span class="building_amount">0</span>
                <span class="tooltiptext fgc bgc_second" onclick="event.stopPropagation()"></span>
            </span>
            <span id="toggle_mana_purifier" class="building_state_on" onclick="toggle_building_state('mana_purifier')">On</span>
        </div>
        <div style="position: relative" class="hidden">
            <span id="building_challenge_basic" class="building tooltip">
                <span class="building_name"><span class="building_prefix"></span>Basic Booster</span>
                <span class="building_amount">0</span>
                <span class="tooltiptext fgc bgc_second" onclick="event.stopPropagation()"></span>
            </span>
            <span id="toggle_challenge_basic" class="building_state_on" onclick="toggle_building_state('challenge_basic')">On</span>
        </div>
        <div style="position: relative" class="hidden">
            <span id="building_challenge_medium" class="building tooltip">
                <span class="building_name"><span class="building_prefix"></span>Fancy Booster</span>
                <span class="building_amount">0</span>
                <span class="tooltiptext fgc bgc_second" onclick="event.stopPropagation()"></span>
            </span>
            <span id="toggle_challenge_medium" class="building_state_on" onclick="toggle_building_state('challenge_medium')">On</span>
        </div>
        <div style="position: relative" class="hidden">
            <span id="building_challenge_advanced" class="building tooltip">
                <span class="building_name"><span class="building_prefix"></span>Mythical Booster</span>
                <span class="building_amount">0</span>
                <span class="tooltiptext fgc bgc_second" onclick="event.stopPropagation()"></span>
            </span>
            <span id="toggle_challenge_advanced" class="building_state_on" onclick="toggle_building_state('challenge_advanced')">On</span>
        </div>
    <!-- End of building list. -->
    </div>
    <div id="upgrades">
        <span id="save" onclick="save();">Save</span>
        <span id="prestige" onclick="prestige.run();" class="tooltip">
            <span>Prestige</span>
            <span class="tooltiptext fgc bgc_second">
                Mana gains from prestige are based on how many resources you have and what kinds they are. <br />
                Mana provides many different unique buildings! <br />
                <span id="prestige_suggest"></span>
            </span>
        </span>
        <span id="all_on" onclick="Object.keys(buildings).forEach(function (build) { if (!buildings[build].on && SPELL_BUILDINGS.indexOf(build) == -1) { toggle_building_state(build);}});">All&nbsp;On</span>
        <span id="all_off" onclick="Object.keys(buildings).forEach(function (build) { if (buildings[build].on && SPELL_BUILDINGS.indexOf(build) == -1) { toggle_building_state(build);}});">All&nbsp;Off</span>
        <div class="hidden">
            <span id="production_box" class="clickable fgc bgc_second" onclick="$('#production_manager').toggleClass('hidden')">Groupings</span><br />
            <div id="production_manager" class="hidden" style="z-index: 1;">
                <div class="clickable fgc bgc_second" style="width: 35em; position: relative; top: -0.4em; display: flex;">
                    <div id="group_names" style="width: 15em; border-right: solid 1px;"></div>
                    <div id="group_data" style="width: 20em;">
                        
                    </div>
                </div>
            </div>
        </div>
        <div id="log">
        </div>
        

        <ul>
        </ul>



    </div>
    <div id="events" class="hidden fgc bgc_second">
        <div class="window_topbar">
            <span id="events_topbar">Something Happened</span>
            <span id="close_events" onclick="$('#events').addClass('hidden'); $('#events_content').html(''); $('#character').addClass('hidden');">X</span>
        </div>
        <div id="events_content"></div>
    </div>
    <div id="character" class="hidden fgc bgc_second">
        <div class="window_topbar">Your stuff</div>
        <div id="character_content"></div>
    </div>
    <div id="settings" class="hidden fgc bgc_second">
        <div class="window_topbar">
            Settings
            <span id="close_settings" onclick="$('#settings').addClass('hidden');">X</span>
        </div>
        <div id="settings_content">
            <b>Important Links and Resources</b><br />
            <a href="changelog.txt" target="_blank" class="fgc">Changelog</a> |
            <a href="http://crappy-incremental.wikia.com/wiki/Crappy_Incremental_Wiki" target="_blank" class="fgc">Wiki</a> |
            <a href="https://discord.gg/78AGWku" target="_blank" class="fgc">Discord</a> |
            <a href="#" class="fgc" onclick="save_to_clip()">Export</a> |
            <a href="#" class="fgc" onclick="load_from_clip()">Import</a> <br />
            <br />
            <b>Settings</b><br />
            <select id="theme_select" class="fgc bgc_second" onchange="if (event.target.value == 'crazy' && !confirm('Seizure warning: This has quickly flashing colors. Proceed?')) { return; } change_theme(event.target.value)">
                <option value="light">Lights On</option>
                <option value="dark">Lights Off</option>
                <option value="crazy">STROBE!</option>
                <option value="halloween">Lights Spooky</option>
                <option value="christmas">Christmas Lights</option>
            </select> |
            <a href="#" class="fgc" id="update_speed_setting" onclick="change_update()">Update Slow</a> |
            <a href="#" class="fgc" id="update_notation" onclick="change_notation()">Scientific Notation</a> |
            <a href="#" class="fgc" id="update_cath_setting" onclick="cath_notifications()">Cat Notifications Off</a><br />
            <a href="#" class="fgc" id="update_confirms" onclick="toggle_confirms()">Confirms Enabled</a><br />
            <br />
            <b>Donate</b><br />
            <a href="https://www.patreon.com/fuzzything44" target="_blank" class="fgc">Patreon</a><br />
            <br />
            <b>Reset Button</b><br />
            Resets ALL progress. There is NO bonus for this!<br />
            <span id="reset" style="background-color: #f22" onclick="if(confirm('Are you sure? This resets EVERYTHING!') && prompt('If you\'re absolutely sure, enter \'reset\'.') == 'reset') { localStorage.clear(); location.reload();}"><span>Reset</span></span><br />
        </div>
    </div>
</body>
</html>
